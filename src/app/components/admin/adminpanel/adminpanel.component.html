<div class="mainDiv p3 mb-3 admin-cards-row">

    <div class="card cardDiv mx-3 admin-card mb-3">
        <div class="card-body text-center">
            <h4 class="card-title mb-3">Szállások</h4>

            <div class="list-group mb-3">
                <a *ngFor="let accommodation of accommodations | slice:0:5;let i = index"
                    class="list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-between">
                        <h5 class="mb-1 mx-auto">{{accommodation.name}}</h5>
                    </div>
                    <p class="mb-1">{{accommodation.description}}</p>
                </a>
                <p><small>Továbbiak megtekintéséhez kattints a kezelés gombra</small></p>
            </div>

            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#AccommodationModal">Kezelés</button>
        </div>
    </div>

    <div class="card cardDiv mx-3 admin-card">
        <div class="card-body text-center">
            <h4 class="card-title mb-3">Felhasználók</h4>
            <div class="list-group mb-3">
                <a *ngFor="let user of users | slice:0:5;let i = index"
                    class="list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-between">
                        <h5 class="mb-1 mx-auto">{{user.name}}</h5>
                    </div>
                    <p class="mb-1">Szerepkör: {{user.role}}</p>
                </a>
                <p><small>Továbbiak megtekintéséhez kattints a kezelés gombra</small></p>
            </div>
            <button class="btn btn-primary w-100 mt-auto" data-bs-toggle="modal" data-bs-target="#UserModal">Kezelés</button>
        </div>
    </div>


 <!-- User Modal -->
    <div class="modal fade" id="UserModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="UserModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-4" id="UserModalLabel">Felhasználók kezelése</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="table-responsive">
            <table class="table table-hover table-striped">
              <thead>
                <tr>
                  <th>Név</th>
                  <th>Email</th>
                  <th>Telefonszám</th>
                  <th>Cím</th>
                  <th>Állapot</th>
                  <th>Műveletek</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let user of users">
                  <td>{{user.name}}</td>
                  <td>{{user.email}}</td>
                  <td>{{user.phone}}</td>
                  <td>{{user.address}}</td>
                  <td>{{user.status == false ? 'Aktív' : 'Inaktív'}}</td>
                  <td>
                    <button class="btn btn-sm btn-warning me-2" (click)="modifyUser(user)">Módosítás</button>
                    <button class="btn btn-sm btn-danger" (click)="deleteUser(user.id)">Törlés</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn" data-bs-dismiss="modal">Mégsem</button>
        </div>
      </div>
    </div>
  </div>
<!-- Accommodation modal -->
 <div class="modal fade" id="AccommodationModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="AccommodationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-4" id="AccommodationModalLabel">Szállások kezelése</h1>

          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="table-responsive">
            <table class="table table-hover table-striped">
              <thead>
                <tr>
                  <th>Név</th>
                  <th>Cím</th>
                  <th>Ár</th>
                  <th>Férőhelyek</th>
                  <th>Leírás</th>
                  <th>Műveletek</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let accommodation of accommodations">
                  <td>{{accommodation.name}}</td>
                  <td>{{accommodation.address}}</td>
                  <td>{{accommodation.basePrice}} €</td>
                  <td>{{accommodation.capacity}}</td>
                  <td>{{accommodation.description}}</td>
                  <td>
                    <button class="btn btn-sm btn-warning me-2" (click)="modifyAccommodation(accommodation)">Módosítás</button>
                    <button class="btn btn-sm btn-danger" (click)="deleteAccommodation(accommodation.id)">Törlés</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn" data-bs-dismiss="modal">Mégsem</button>
        </div>
      </div>
    </div>
  </div>
<!-- Modify modal -->
   <div class="modal fade" id="ModifyModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="ModifyModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-4" id="ModifyModalLabel">Szállás módosítása</h1>

          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form class="d-flex flex-column">
            <div class="mb-3">
              <label for="accommodationName" class="form-label">Név</label>
              <input type="text" class="form-control" id="accommodationName" placeholder="Név" [(ngModel)]="selectedAccommodation.name" name="name">
            </div>
            <div class="mb-3">
              <label for="accommodationAddress" class="form-label">Cím</label>
              <input type="text" class="form-control" id="accommodationAddress" placeholder="Cím" [(ngModel)]="selectedAccommodation.address" name="address">
            </div>
            <div class="mb-3">
              <label for="accommodationPrice" class="form-label">Ár (€)</label>
              <input type="number" class="form-control" id="accommodationPrice" placeholder="Ár" [(ngModel)]="selectedAccommodation.basePrice" name="price">
            </div>
            <div class="mb-3">
              <label for="accommodationCapacity" class="form-label">Férőhelyek</label>
              <input type="number" class="form-control" id="accommodationCapacity" placeholder="Férőhelyek" [(ngModel)]="selectedAccommodation.capacity" name="capacity">
            </div>
            <div class="mb-3">
              <label for="accommodationDescription" class="form-label">Leírás</label>
              <textarea class="form-control" id="accommodationDescription" placeholder="Leírás" [(ngModel)]="selectedAccommodation.description" name="description"></textarea>
            </div>

            <button type="button" class="btn btn-primary saveBtn w-100 mt-3" (click)="saveAccommodationChanges()" [disabled]="loadingModify">
              <span *ngIf="loadingModify">
                <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                Mentés...
              </span>
              <span *ngIf="!loadingModify">Változások mentése</span>
            </button>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn" data-bs-dismiss="modal">Mégsem</button>
        </div>
      </div>
    </div>
  </div>

  <!--ModifyUser Modal-->
  <div class="modal fade" id="ModifyUserModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="ModifyUserModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-4" id="ModifyUserModalLabel">Felhasználó módosítása</h1>

          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form class="d-flex flex-column">
            <div class="mb-3">
              <label for="userName" class="form-label">Név</label>
              <input type="text" class="form-control" id="userName" placeholder="Név" [(ngModel)]="selectedUser.name" name="name">
            </div>
            <div class="mb-3">
              <label for="userEmail" class="form-label">Email</label>
              <input type="email" class="form-control" id="userEmail" placeholder="Email" [(ngModel)]="selectedUser.email" name="email">
            </div>
            <div class="mb-3">
              <label for="userRole" class="form-label">Szerepkör</label>
              <select class="form-select" id="userRole" [(ngModel)]="selectedUser.role" name="role">
                <option value="admin">Admin</option>
                <option value="user">Felhasználó</option>
                <option value="owner">Tulajdonos</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="userStatus" class="form-label">Állapot</label>
              <select class="form-select" id="userStatus" [(ngModel)]="selectedUser.status" name="status">
                <option value="0">Aktív</option>
                <option value="1">Inaktív</option>
              </select>
            </div>
            <button type="button" class="btn btn-primary saveBtn w-100 mt-3" (click)="saveUserChanges()" [disabled]="loadingModify">
              <span *ngIf="loadingModify">
                <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                Mentés...
              </span>
              <span *ngIf="!loadingModify">Változások mentése</span>
            </button>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn" data-bs-dismiss="modal">Mégsem</button>
        </div>
      </div>
    </div>
  </div>
</div>